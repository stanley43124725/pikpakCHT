import{C as I}from"./clipboard.a54b99ef.js";import{i as v}from"./index.843b6552.js";import{d as S,r,a4 as H,o as M,b as g,s as h,e,f as a,aC as T,w as u,M as $,aD as _,I as m,aE as j,y as d,A as C,aF as f,aG as L,aH as z,ad as G,R as V,Q as F,ap as J,aI as R,ag as U,a7 as q,D as Q,as as K,U as D,aJ as O,H as P}from"./vendor.64da71ad.js";const W={class:"list-page"},X=d("\u8907\u88FD"),Y=d("\u7ACB\u5373\u4E0B\u8F09"),Z={key:0,class:"loading"},ee=d("\u8F09\u5165\u4E2D "),se=S({setup(ae){const E=t=>{K(()=>{const s=document.createElement("button"),i=new I(s,{text:()=>t,action:()=>"copy"});i.on("success",l=>{window.$message.success("\u8907\u88FD\u6210\u529F"),i.destroy()}),i.on("error",l=>{window.$message.error("\u8907\u88FD\u5931\u6557\uFF0C\u60A8\u53EF\u4EE5F12\u6253\u958B\u63A7\u5236\u53F0\u624B\u52D5\u8907\u88FD\uFF0C\u6216\u624B\u52D5\u8907\u88FD\u8DF3\u51FA\u8996\u7A97\u8F38\u5165\u6846")}),s.click()})},c=r(),w=async()=>{v.get("https://api-drive.mypikpak.com/vip/v1/activity/inviteCode").then(t=>{var s;c.value=(s=t.data)==null?void 0:s.code})},n=r();H(()=>n.value.invited_nums<=0);const x=r({vip_rebate:"\u6703\u54E1\u5206\u6210",invite_reward:"\u9080\u8ACB\u734E\u52F5",relation:"\u9080\u8ACB\u95DC\u4FC2"}),B=async()=>{v.get("https://api-drive.mypikpak.com/vip/v1/activity/inviteInfo").then(t=>{n.value=t.data}).catch(()=>{n.value={}})},A=r([{title:"\u9080\u8ACB\u7528\u6236",key:"invited_user"},{title:"\u734E\u52F5\u985E\u578B",key:"reward_source",render:t=>D(O,{type:t.reward_source=="vip_rebate"?"info":"success"},{default:()=>x.value[t.reward_source]})},{title:"\u5929\u6578",key:"reward_days"},{title:"\u6642\u9593",key:"time",align:"right",render:t=>D(P,{time:new Date(String(t.time)||""),format:"yyyy-MM-dd HH:MM:ss"})}]),o=r([]),p=r(!1),y=async(t,s=30)=>{let i="https://api-drive.mypikpak.com/vip/v1/activity/inviteList";t&&(i+=`?begin=${t}&limit=${s}`),p.value=!0,v.get(i).then(l=>{var k;t||(o.value=[]),o.value=o.value.concat(((k=l.data)==null?void 0:k.data)||[])}).finally(()=>{p.value=!1})},N=()=>{v.get(`https://api-drive.mypikpak.com/package/v1/apk/url/${c.value}`).then(t=>{window.open(t.data.apk_url)})},b=t=>{t.target.offsetHeight+t.target.scrollTop>=t.target.scrollHeight-30&&o.value.length<n.value.invited_nums&&!p.value&&y(o.value[o.value.length-1].time)};return M(()=>{w(),B(),y()}),(t,s)=>(g(),h("div",W,[e(a(T),null,{default:u(()=>[e(a(_),{span:12},{default:u(()=>{var i;return[e(a(f),{label:"\u6703\u54E1\u5206\u6210(\u5929/\u6B21)",value:(i=n.value)==null?void 0:i.invited_join_days},{prefix:u(()=>[e(a(m),null,{default:u(()=>[e(a(j))]),_:1})]),suffix:u(()=>{var l;return[d("/ "+C((l=n.value)==null?void 0:l.join_vip_nums),1)]}),_:1},8,["value"])]}),_:1}),e(a(_),{span:12},{default:u(()=>{var i;return[e(a(f),{label:"\u9080\u8ACB\u734E\u52F5(\u5929/\u4EBA)",value:(i=n.value)==null?void 0:i.add_days},{prefix:u(()=>[e(a(m),null,{default:u(()=>[e(a(L))]),_:1})]),suffix:u(()=>{var l;return[d("/ "+C((l=n.value)==null?void 0:l.invited_nums),1)]}),_:1},8,["value"])]}),_:1}),e(a(_),{span:12},{default:u(()=>[e(a(f),{label:"\u9080\u8ACB\u9023\u7D50"},{prefix:u(()=>[e(a(m),null,{default:u(()=>[e(a(z))]),_:1})]),default:u(()=>[e(a(G),{inline:""},{default:u(()=>[e(a(V),{type:"text",size:"small",value:"https://toapp.mypikpak.com/activity/invited?code="+c.value},null,8,["value"]),e(a(F),{size:"small",type:"primary",onClick:s[0]||(s[0]=i=>E("https://toapp.mypikpak.com/activity/invited?code="+c.value))},{default:u(()=>[X]),_:1})]),_:1}),e(a(J))]),_:1})]),_:1}),e(a(_),{span:12},{default:u(()=>[e(a(f),{label:"\u4E0B\u8F09\u63A8\u5EE3"},{prefix:u(()=>[e(a(m),null,{default:u(()=>[e(a(R))]),_:1})]),default:u(()=>[e(a(F),{size:"small",type:"primary",onClick:N},{default:u(()=>[Y]),_:1})]),_:1})]),_:1})]),_:1}),e(a($),{style:{"max-height":"calc(100vh - 250px)"},onScroll:b},{default:u(()=>[e(a(U),{data:o.value,columns:A.value},null,8,["data","columns"]),p.value?(g(),h("div",Z,[e(a(q),{size:"small"}),ee])):Q("",!0)]),_:1})]))}});export{se as default};
