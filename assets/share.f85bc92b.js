import{d as N,r as n,o as C,b as f,s as E,e as l,f as s,ak as m,w as i,c as g,M as x,E as c,U as h,H as F,B,ad as w,al as P,I as U,y as D,A as O,ag as T,ah as L,D as S}from"./vendor.c9705c7c.js";import{n as M,i as H}from"./index.6eb3427d.js";const z={class:"list-page"},j=c("a",{href:"https://t.me/shabitt",target:"_blank"},"\u4F5C\u8005",-1),V=c("a",{href:"https://shimily.notion.site/shimily/f90e8e28b55e423185f44c89c53c573c?v=b69a268a91c946ce9238f947100070a4",target:"_blank"},"\u5730\u5740",-1),Y=c("br",null,null,-1),I=D(" \u8ACB\u5148\u5728\u6587\u4EF6\u5217\u8868\u64CD\u4F5C\u9078\u64C7\u8A2D\u7F6E\u9ED8\u8A8D "),W={href:"https://www.tjsky.net/?p=220#i-4",target:"_blank"},K=c("br",null,null,-1),R={key:0,class:"loading"},$=D("\u8F09\u5165\u4E2D "),Z=N({setup(q){const d=n([]),o=n(),p=n(!1),r=n(),y=()=>{p.value=!0,M.post("https://api.notion.com/v1/databases/f90e8e28b55e423185f44c89c53c573c/query",{start_cursor:r.value||void 0,page_size:50}).then(t=>{if(p.value=!1,r.value||(o.value=[]),o.value=o.value.concat(t.data.results),r.value=t.data.has_more&&t.data.next_cursor,d.value.length==0){if(o.value.length)for(let e in o.value[0].properties)e!=="\u767C\u5E03\u4EBA"&&e!=="\u767C\u5E03\u65E5\u671F"&&e!=="\u5206\u985E"&&e!=="\u6A19\u7C64"&&d.value.push({title:e,key:e,ellipsis:{tooltip:{placement:e==="\u540D\u7A31"?"right":"bottom"}},width:e==="\u5927\u5C0F"?100:e==="\u540D\u7A31"?1e3:void 0,render:u=>{const a=u.properties[e];switch(a.type){case"rich_text":case"title":return h("div",{},{default:()=>a[a.type]&&a[a.type].length&&a[a.type].map(b=>b.plain_text)});case"select":return h("div",{style:{color:u.properties[e].select.color}},a.select.name);case"created_time":return h(F,{time:new Date(a.created_time),type:"date",format:"MM-dd HH:MM"});default:return"--"}}});d.value.push({title:"\u64CD\u4F5C",key:"action",width:80,align:"right",render:e=>h(B,{type:"primary",onClick:()=>{k(e.properties.\u9023\u7D50.rich_text[0].plain_text)}},{default:()=>"\u4FDD\u5B58"})})}})},_=n(),v=()=>JSON.parse(window.localStorage.getItem("pikpakUploadFolder")||"{}"),k=t=>{let e={};if(!v().id)return window.$message.error("\u8ACB\u5148\u8A2D\u7F6E\u9ED8\u8A8D\u4E0A\u50B3\u76EE\u9304"),!1;if(t.indexOf("PikPak://")===0){const u=t.substring(9).split("|");e={kind:"drive#file",parent_id:v().id,name:u[0],size:u[1],hash:u[2],upload_type:"UPLOAD_TYPE_RESUMABLE",objProvider:{provider:"UPLOAD_TYPE_UNKNOWN"}}}else e={kind:"drive#file",name:"",upload_type:"UPLOAD_TYPE_URL",url:{url:t},params:{from:"file"},folder_type:"DOWNLOAD"};H.post("https://api-drive.mypikpak.com/drive/v1/files",e).then(u=>{(u.data.upload_type==="UPLOAD_TYPE_UNKNOWN"||t.indexOf("PikPak://")===-1)&&window.$message.success("\u6DFB\u52A0\u6210\u529F")})},A=t=>{t.target.offsetHeight-t.target.scrollTop<30&&r.value&&!p.value&&y()};return C(()=>{_.value=v(),r.value="",y()}),(t,e)=>(f(),E("div",z,[l(s(m),{title:"\u611F\u8B1D@shabitt",type:"info",closable:""},{default:i(()=>[l(s(w),null,{default:i(()=>[j,V]),_:1})]),_:1}),Y,!_.value||!_.value.id?(f(),g(s(m),{key:0,title:"\u8ACB\u5148\u8A2D\u7F6E\u9ED8\u8A8D\u4E0A\u50B3\u76EE\u9304",type:"error"},{default:i(()=>[I,c("a",W,[l(s(U),{style:{"vertical-align":"middle"},size:"20",color:"#d03050"},{default:i(()=>[l(s(P))]),_:1})])]),_:1})):(f(),g(s(m),{key:1,title:"\u9ED8\u8A8D\u76EE\u9304",type:"success"},{default:i(()=>[D(O(_.value.name),1)]),_:1})),K,l(s(x),{style:{"max-height":"calc(100vh - 300px)"},onScroll:A},{default:i(()=>[l(s(T),{bordered:!1,size:"small",data:o.value,columns:d.value},null,8,["data","columns"]),p.value?(f(),E("div",R,[l(s(L),{size:"small"}),$])):S("",!0)]),_:1})]))}});export{Z as default};
